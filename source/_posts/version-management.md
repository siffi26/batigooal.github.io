---
title: 版本管理方法与规范（svn&git）
date: 2018-12-31 09:19:07
tags: 
     - svn
     - git
     - 版本管理
---

### SVN的基本操作
ubuntu下svn服务自启动的设置方式是打开并编辑/etc/rc.local文件，在exit 0之前添加需要自启动的命令: svnserve -d -r /svnroot/XXX

checkout与export的区别在于，export命令导出的项目文件是无版本控制的，即没有.svn隐藏文件夹，.svn文件夹记录的是工作副本最后一次更新厚的文件状态，可以标记工作副本的一切变化

#### 常见的SVN客户端命令
+ svn add 添加到版本控制
+ svn commit 提交修改到服务端（创建一个新版本号）
+ svn update 更新工作副本。默认情况下，每个文件只会从服务端更新一次最新版本；svn up *可以强制更新最新版本。
+ svn delete 从版本库中删除文件或目录
+ svn diff 版本差异比较
+ svn mkdir 创建目录并增加到版本控制
+ svn cat 不检出工作副本直接查看指定文件
+ svn revert 还原工作副本

#### 关于版本冲突问题
+ 什么是冲突以及冲突产生的条件。二进制冲突和树冲突
+ 冲突的处理，svn resolve, sun resolved

#### 锁定与解锁
+ svn lock 锁定文件，防止其他成员对文件进行提交
+ svn unlock 解锁文件

#### svn进阶管理命令
+ svn list 列出当前目录下处于版本控制的所有文件
+ svn status 列出工作副本中的文件或文件夹的状态。？-无版本控制；D-已被标记从版本库中删除；M-已被编辑过；A-已被标记增加到版本控制中；R-文件被替换；C-文件存在冲突；！-文件缺失
+ svn log 查看提交日志（来自svn ci的-m参数）
+ svn info 工作副本及文件或文件夹的详细信息

#### 多版本库解决方案
在一台svn服务器上管理维护多个项目
+ 方案1：使用不同的端口号来管理维护不同项目的svn服务
+ 方案2：svnserve服务的路径设置为父级目录，所以所有项目的文件夹都需要创建在同一个文件夹下

#### svn copy
+ 工作副本 -> 工作副本: svn cp -r 版本号，如果批量复制就需要复制到其他路径下，不会更改文件名
+ 工作副本 -> 版本库: svn cp 工作副本文件名 版本库文件名 -m "备注信息"，工作副本不再是最新版本，需要update；不可以跨库复制
+ 版本库 -> 工作副本: svn cp 版本库文件名 工作副本文件名；支持跨库复制，可以将其他项目仓库中的文件直接复制到当前项目的本地工作副本中
+ 版本库 -> 版本库: 用于版本分支管理

#### svn重定向
原服务器目录的路径发生变化，需要将工作副本进行重定向

svn switch --relocate 原路径 新路径 

#### 主干版本与分支版本，以及项目管理中常见的两种方式
标准的项目代码svn布局：主干版本放置于trunk目录；分支版本放置于branch目录；已发布版本的备份放置于tags目录（不允许修改）

集中式管理
1. trunk中1.0开发完毕，代码冻结
2. 基于已经冻结的trunk，为release1.0打tag，存放于tags目录下
3. trunk中2.0开始开发
4. 发现1.0版本有bug，或者对1.0版本有新的需求，基于1.0的对应tag版本做分支版本存于branch目录中
5. 1.0的bugfix版本开发在branch中进行，2.0版本开发在trunk中进行
6. 1.0的bugfix版本开发完成后做release打tag，存放于tags目录下

分散式管理
1. 1.0开发，做dev1.0的branch目录
2. 1.0开发完成，将dev1.0目录merge到trunk中
3. 根据trunk内容做1.0的完整版本tag，存放于tags目录下
4. 同时开始做dev2.0开发，继续在branch中新建dev2.0的目录进行开发
5. 1.0有bug，直接在branch的dev1.0中进行bugfix，选择性的进行代码merge









